# Render Blueprint for MedDirect
#
# ⚠️  IMPORTANT NOTE:
# This render.yaml file is provided as a reference template.
# For production deployment, we recommend using the manual deployment
# approach described in RENDER_MANUAL_DEPLOYMENT.md for better control
# over environment variables and configuration.
#
# The manual approach allows you to:
# 1. Set sensitive environment variables securely
# 2. Configure each service individually
# 3. Troubleshoot issues more easily
# 4. Control deployment order
#
# To use this file:
# 1. Update all environment variables with your actual values
# 2. Commit to your repository
# 3. Import the blueprint in Render dashboard

services:
  # Backend API Service
  - type: web
    name: meddirect-backend
    runtime: node
    plan: free
    region: oregon
    buildCommand: cd backend && npm install
    startCommand: cd backend && npm start
    healthCheckPath: /api/health
    envVars:
      - key: NODE_ENV
        value: production
      - key: NODE_VERSION
        value: 20.11.1
      - key: PORT
        value: 10000
      - key: FRONTEND_URL
        value: https://meddirect-frontend.onrender.com
      - key: ADMIN_URL
        value: https://meddirect-admin.onrender.com
      # Database & auth (update with real values)
      # - key: MONGODB_URI
      #   value: your_mongodb_connection_string
      # - key: JWT_SECRET
      #   value: your_jwt_secret
      # Third-party APIs
      # - key: CLOUDINARY_CLOUD_NAME
      #   value: your_cloud_name
      # - key: CLOUDINARY_API_KEY
      #   value: your_api_key
      # - key: CLOUDINARY_API_SECRET
      #   value: your_api_secret
      # - key: GOOGLE_MAPS_API_KEY
      #   value: your_server_side_google_key
      # See RENDER_MANUAL_DEPLOYMENT.md for complete list

  # Frontend Static Site
  - type: web
    name: meddirect-frontend
    plan: free
    region: oregon
    buildCommand: cd clientside && npm install && npm run build
    staticPublishPath: ./clientside/dist
    envVars:
      - key: VITE_BACKEND_URL
        value: "https://meddirect-backend.onrender.com"
      # - key: VITE_GOOGLE_MAPS_API_KEY
      #   value: your_browser_restricted_google_key
      # Add your frontend environment variables here

  # Admin Panel Static Site
  - type: web
    name: meddirect-admin
    plan: free
    region: oregon
    buildCommand: cd admin && npm install && npm run build
    staticPublishPath: ./admin/dist
    envVars:
      - key: VITE_BACKEND_URL
        value: "https://meddirect-backend.onrender.com"
      # - key: VITE_GOOGLE_MAPS_API_KEY
      #   value: your_browser_restricted_google_key
      # Add your admin environment variables here
